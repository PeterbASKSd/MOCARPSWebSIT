{"version":3,"file":"index.cjs.js","sources":["../src/components/PDFViewer.tsx","../src/utils/index.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/components/File.tsx","../src/components/Previewer.tsx"],"sourcesContent":["//@ts-nocheck\nimport React, { useState } from \"react\";\nimport { Document, pdfjs, Page } from \"react-pdf\";\n\ntype PropType = {\n  url: string;\n};\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nconst PDFViewer: React.FC<PropType> = ({ url }) => {\n  const [numPages, setNumPages] = useState(null);\n\n  const onDocumentLoadSuccess = ({ numPages: nextNumPages }) => {\n    setNumPages(nextNumPages);\n  };\n  return (\n    <>\n      <Document file={url} onLoadSuccess={onDocumentLoadSuccess}>\n        {Array.from({ length: numPages }, (_, index) => (\n          <Page\n            key={`page_${index + 1}`}\n            pageNumber={index + 1}\n            renderAnnotationLayer={false}\n            renderTextLayer={false}\n          />\n        ))}\n      </Document>\n    </>\n  );\n};\n\nexport default PDFViewer;\n","const isExtInclude = (filename: string, extList: string[]) => {\n  const dotPos = filename.lastIndexOf(\".\");\n  if (dotPos >= 0) {\n    const ext = filename.substr(dotPos);\n    return extList.includes(ext.toLowerCase());\n  }\n  return false;\n};\n\nconst wordExts = [\".docx\", \".doc\", \".rtf\", \".html\", \".odt\"];\nconst excelExts = [\n  \".xlsx\",\n  \".xls\",\n  \".csv\",\n  \".xlsb\",\n  \".xlsm\",\n  \".xlt\",\n  \".xltm\",\n  \".xltx\",\n];\nconst pptExts = [\".ppt\", \".pptx\"];\n\nexport const isImageFile = (contentType: string) => {\n  return contentType.startsWith(\"image\");\n};\n\nexport const isAudioFile = (contentType: string) => {\n  return contentType.startsWith(\"audio\");\n};\n\nexport const isVideoFile = (contentType: string) => {\n  return contentType.startsWith(\"video\");\n};\n\nexport const isPDFFile = (contentType: string) => {\n  return contentType.startsWith(\"application/pdf\");\n};\n\nexport const isOfficeWordFile = (filename: string) => {\n  return isExtInclude(filename, wordExts);\n};\n\nexport const isOfficeExcelFile = (filename: string) => {\n  return isExtInclude(filename, excelExts);\n};\n\nexport const isOfficePPTFile = (filename: string) => {\n  return isExtInclude(filename, pptExts);\n};\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useState } from \"react\";\nimport mime from \"mime-types\";\nimport PDFViewer from \"./PDFViewer\";\nimport {\n  isAudioFile,\n  isImageFile,\n  isOfficeExcelFile,\n  isOfficePPTFile,\n  isOfficeWordFile,\n  isPDFFile,\n  isVideoFile,\n} from \"../utils\";\nimport styles from \"../styles/styles.module.css\";\nimport { AiOutlineRotateLeft, AiOutlineRotateRight } from \"react-icons/ai\";\n\ntype PropType = {\n  url: string;\n};\n\nconst PreviewModal: React.FC<PropType> = ({ url }) => {\n  const [rotate, setRotate] = useState<number>(0);\n  const type = mime.lookup(url) || \"image\";\n  const mediaFile = () => {\n    if (isImageFile(type))\n      return (\n        <>\n          <img\n            alt=\"\"\n            src={url}\n            className=\"max-h-4/5 max-w-full block overflow-auto select-none\"\n            style={{ transform: `rotate(${rotate}deg)` }}\n          />\n          <div className=\"fixed inset-x-1/2 bottom-8 flex justify-center\">\n            <a className=\"my-auto mx-4 bg-black rounded-full p-2\">\n              <AiOutlineRotateLeft\n                size=\"1rem\"\n                className=\"text-white hover:!text-red-500 cursor-pointer\"\n                onClick={() => setRotate(rotate - 90)}\n              />\n            </a>\n            <a className=\"my-auto mx-4 bg-black rounded-full p-2\">\n              <AiOutlineRotateRight\n                size=\"1rem\"\n                className=\"text-white hover:!text-red-500 cursor-pointer\"\n                onClick={() => setRotate(rotate + 90)}\n              />\n            </a>\n          </div>\n        </>\n      );\n    if (isPDFFile(type))\n      return (\n        <div className={styles.mediaContainer}>\n          <PDFViewer url={url} />\n        </div>\n      );\n    if (isOfficeWordFile(url))\n      return (\n        <iframe\n          className={styles.docContainer}\n          src={`https://view.officeapps.live.com/op/embed.aspx?src=${url}`}\n        />\n      );\n    if (isOfficePPTFile(url))\n      return (\n        <iframe\n          className={styles.pptContainer}\n          src={`https://view.officeapps.live.com/op/embed.aspx?src=${url}`}\n        />\n      );\n    if (isOfficeExcelFile(url))\n      return (\n        <iframe\n          className={styles.excelContainer}\n          src={`https://view.officeapps.live.com/op/embed.aspx?src=${url}`}\n        />\n      );\n    if (isVideoFile(type) || isAudioFile(type))\n      return (\n        <video src={url} controls className={styles.mediaContainer}>\n          <track kind=\"captions\" />\n        </video>\n      );\n    return (\n      <div className=\"flex items-center justify-center text-white text-lg\">\n        Unable to preview this unknown file\n      </div>\n    );\n  };\n  return mediaFile();\n};\n\nexport default PreviewModal;\n","import Modal from \"rc-dialog\";\nimport React, { useState } from \"react\";\nimport File from \"./File\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\n\nimport styles from \"../styles/styles.module.css\";\nimport {\n  AiOutlineCheck,\n  AiOutlineDownload,\n  AiOutlineShareAlt,\n  AiOutlineClose,\n  AiOutlineRight,\n  AiOutlineLeft,\n} from \"react-icons/ai\";\n\ntype PropType = {\n  visible: boolean;\n  setVisible: (visible: boolean) => void;\n  urls: string[];\n};\n\nconst PreviewModal: React.FC<PropType> = ({ visible, setVisible, urls }) => {\n  const [copyed, setCopyed] = useState<boolean>(false);\n  const [index, setIndex] = useState(0);\n  const currentUrl = urls[index];\n\n  return (\n    <Modal\n      visible={visible}\n      onClose={() => setVisible(false)}\n      footer={null}\n      zIndex={10000}\n      destroyOnClose\n      closable={false}\n      maskClosable={false}\n      className={styles.modalContainer}\n      wrapClassName={styles.modalWrap}\n      transitionName=\"\"\n      maskTransitionName=\"\"\n    >\n      <div className=\"flex w-full items-center justify-end fixed top-6 right-4\">\n        <div className=\"flex\">\n          <a\n            href={`${currentUrl}?download/${currentUrl.split(\"/\").pop()}`}\n            className=\"my-auto mx-4 bg-black rounded-full p-2\"\n          >\n            <AiOutlineDownload\n              size=\"1.5rem\"\n              className=\"text-white hover:!text-red-500 cursor-pointer\"\n            />\n          </a>\n          <CopyToClipboard\n            text={currentUrl}\n            onCopy={() => {\n              setCopyed(true);\n              setTimeout(() => {\n                setCopyed(false);\n              }, 2000);\n            }}\n          >\n            <a className=\"my-auto mx-4 bg-black rounded-full p-2\">\n              {copyed ? (\n                <AiOutlineCheck\n                  size=\"1.5rem\"\n                  className=\"text-white hover:!text-red-500 cursor-pointer\"\n                />\n              ) : (\n                <AiOutlineShareAlt\n                  size=\"1.5rem\"\n                  className=\"text-white hover:!text-red-500 cursor-pointer\"\n                />\n              )}\n            </a>\n          </CopyToClipboard>\n          <a className=\"my-auto mx-4 bg-black rounded-full p-2\">\n            <AiOutlineClose\n              size=\"1.5rem\"\n              className=\"text-white hover:!text-red-500 cursor-pointer\"\n              onClick={() => setVisible(false)}\n            />\n          </a>\n        </div>\n      </div>\n      <File url={currentUrl} />\n      <a\n        className={`my-auto mx-4 bg-black rounded-full p-3 fixed md:top-1/2 md:bottom-auto left-2 sm:bottom-8 sm:top-auto ${\n          index === 0 ? \"hidden\" : \"block\"\n        }`}\n        onClick={() => {\n          setIndex(index - 1);\n        }}\n      >\n        <AiOutlineLeft\n          size=\"2rem\"\n          className=\"text-white hover:!text-red-500 cursor-pointer\"\n        />\n      </a>\n      <a\n        className={`my-auto mx-4 bg-black rounded-full p-3 fixed md:top-1/2 md:bottom-auto right-2 sm:bottom-8 sm:top-auto ${\n          index + 1 === urls.length ? \"hidden\" : \"block\"\n        }`}\n        onClick={() => {\n          setIndex(index + 1);\n        }}\n      >\n        <AiOutlineRight\n          size=\"2rem\"\n          className=\"text-white hover:!text-red-500 cursor-pointer\"\n        />\n      </a>\n    </Modal>\n  );\n};\n\nexport default PreviewModal;\n"],"names":["pdfjs","useState","React","Document","Page","PreviewModal","mime","AiOutlineRotateLeft","AiOutlineRotateRight","Modal","AiOutlineDownload","CopyToClipboard","AiOutlineCheck","AiOutlineShareAlt","AiOutlineClose","File","AiOutlineLeft","AiOutlineRight"],"mappings":"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"}